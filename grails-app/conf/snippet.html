<pre><code style="display: block; padding: 0.5em; background-color: #f4f4f4; font-size: 0.75em; color: black;"><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">001:</span><span class="keyword" style="font-weight: bold; color: navy;">var</span>&nbsp;dataset&nbsp;=&nbsp;[<span class="number" style="color: #800;">1</span>,&nbsp;<span class="number" style="color: #800;">2</span>,&nbsp;<span class="number" style="color: #800;">3</span>,&nbsp;<span class="number" style="color: #800;">4</span>];<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">002:</span><br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">003:</span><span class="comment" style="color: #777;">//&nbsp;Module</span><br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">004:</span><span class="comment" style="color: #777;">///////////////////////////////////////////////////////////////////////</span><br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">005:</span><span class="comment" style="color: #777;">//&nbsp;Our&nbsp;own&nbsp;namespace&nbsp;under&nbsp;the&nbsp;d3&nbsp;namespace</span><br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">006:</span><span class="comment" style="color: #777;">//&nbsp;Like&nbsp;d3.svg&nbsp;or&nbsp;d3.layout</span><br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">007:</span>d3.edge&nbsp;=&nbsp;{};<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">008:</span><br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">009:</span><span class="comment" style="color: #777;">//&nbsp;The&nbsp;"module"&nbsp;function&nbsp;returns&nbsp;another&nbsp;function</span><br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">010:</span>d3.edge.table&nbsp;=&nbsp;<span class="function"><span class="keyword" style="font-weight: bold; color: navy;">function</span>&nbsp;<span class="func-title">module</span><span class="params">()</span>&nbsp;{</span><br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">011:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" style="color: #777;">//&nbsp;This&nbsp;returned&nbsp;function&nbsp;takes&nbsp;a&nbsp;d3&nbsp;selection&nbsp;as&nbsp;argument</span><br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">012:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="function"><span class="keyword" style="font-weight: bold; color: navy;">function</span>&nbsp;<span class="func-title">exports</span><span class="params">(_selection)</span>&nbsp;{</span><br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">013:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" style="color: #777;">//&nbsp;So&nbsp;it&nbsp;can&nbsp;loop&nbsp;through&nbsp;this&nbsp;selection&nbsp;with&nbsp;d3.each</span><br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">014:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;_selection.each(<span class="keyword" style="font-weight: bold; color: navy;">function</span>(_data)&nbsp;{<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">015:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" style="color: #777;">//&nbsp;"_data"&nbsp;was&nbsp;bound&nbsp;to&nbsp;this&nbsp;DOM&nbsp;element&nbsp;by&nbsp;d3</span><br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">016:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" style="color: #777;">//&nbsp;"this"&nbsp;is&nbsp;the&nbsp;current&nbsp;DOM&nbsp;object</span><br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">017:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;d3.select(<span class="keyword" style="font-weight: bold; color: navy;">this</span>)<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">018:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" style="color: #777;">//&nbsp;Let's&nbsp;add&nbsp;a&nbsp;div&nbsp;to&nbsp;it</span><br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">019:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.append(<span class="string" style="color: #050;">"div"</span>)<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">020:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" style="color: #777;">//&nbsp;and&nbsp;write&nbsp;something&nbsp;useful</span><br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">021:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.html(<span class="string" style="color: #050;">"Hello&nbsp;World:&nbsp;"</span>&nbsp;+&nbsp;_data);<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">022:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;});<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">023:</span>&nbsp;&nbsp;&nbsp;&nbsp;}<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">024:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" style="color: #777;">//&nbsp;This&nbsp;is&nbsp;where&nbsp;the&nbsp;function&nbsp;is&nbsp;returned&nbsp;by&nbsp;the&nbsp;"module"&nbsp;function</span><br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">025:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="font-weight: bold; color: navy;">return</span>&nbsp;exports;<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">026:</span>};<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">027:</span><br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">028:</span><span class="comment" style="color: #777;">//&nbsp;To&nbsp;use&nbsp;it,&nbsp;first&nbsp;we&nbsp;ask&nbsp;the&nbsp;module&nbsp;to&nbsp;give&nbsp;us&nbsp;the&nbsp;function</span><br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">029:</span><span class="keyword" style="font-weight: bold; color: navy;">var</span>&nbsp;table&nbsp;=&nbsp;d3.edge.table();<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">030:</span><br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">031:</span><span class="comment" style="color: #777;">//&nbsp;We&nbsp;pass&nbsp;a&nbsp;selection&nbsp;with&nbsp;some&nbsp;data&nbsp;bound&nbsp;to&nbsp;it</span><br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">032:</span>table(d3.select(<span class="string" style="color: #050;">"#figure"</span>).datum(dataset));<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">033:</span><br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">034:</span><span class="comment" style="color: #777;">//&nbsp;The&nbsp;same&nbsp;thing&nbsp;can&nbsp;be&nbsp;written&nbsp;using&nbsp;a&nbsp;more&nbsp;typical&nbsp;d3&nbsp;pattern</span><br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">035:</span><span class="comment" style="color: #777;">//&nbsp;We&nbsp;select&nbsp;an&nbsp;element</span><br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">036:</span>d3.select(<span class="string" style="color: #050;">"#figure"</span>)<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">037:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" style="color: #777;">//&nbsp;bind&nbsp;data&nbsp;to&nbsp;it</span><br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">038:</span>&nbsp;&nbsp;&nbsp;&nbsp;.datum(dataset)<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">039:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" style="color: #777;">//&nbsp;and&nbsp;give&nbsp;this&nbsp;to&nbsp;the&nbsp;table</span><br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">040:</span>&nbsp;&nbsp;&nbsp;&nbsp;.call(table);<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">041:</span><br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">042:</span><br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">043:</span><span class="comment" style="color: #777;">//&nbsp;Getters//setters</span><br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">044:</span><span class="comment" style="color: #777;">///////////////////////////////////////////////////////////////////////</span><br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">045:</span>d3.edge&nbsp;=&nbsp;{};<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">046:</span><br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">047:</span>d3.edge.table&nbsp;=&nbsp;<span class="function"><span class="keyword" style="font-weight: bold; color: navy;">function</span>&nbsp;<span class="func-title">module</span><span class="params">()</span>&nbsp;{</span><br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">048:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" style="color: #777;">//&nbsp;Here&nbsp;are&nbsp;some&nbsp;"private"&nbsp;methods</span><br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">049:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="font-weight: bold; color: navy;">var</span>&nbsp;fontSize&nbsp;=&nbsp;<span class="number" style="color: #800;">10</span>,<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">050:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fontColor&nbsp;=&nbsp;<span class="string" style="color: #050;">"red"</span>;<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">051:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="function"><span class="keyword" style="font-weight: bold; color: navy;">function</span>&nbsp;<span class="func-title">exports</span><span class="params">(_selection)</span>&nbsp;{</span><br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">052:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;_selection.each(<span class="keyword" style="font-weight: bold; color: navy;">function</span>(_data)&nbsp;{<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">053:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;d3.select(<span class="keyword" style="font-weight: bold; color: navy;">this</span>)<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">054:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.append(<span class="string" style="color: #050;">"div"</span>)<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">055:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.style({<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">056:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" style="color: #050;">"font-size"</span>:&nbsp;fontSize&nbsp;+&nbsp;<span class="string" style="color: #050;">"px"</span>,<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">057:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;color:&nbsp;fontColor<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">058:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;})<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">059:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.html(<span class="string" style="color: #050;">"Hello&nbsp;World:&nbsp;"</span>&nbsp;+&nbsp;_data);<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">060:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;});<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">061:</span>&nbsp;&nbsp;&nbsp;&nbsp;}<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">062:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" style="color: #777;">//&nbsp;The&nbsp;"public"&nbsp;methods&nbsp;can&nbsp;be&nbsp;set&nbsp;to&nbsp;the&nbsp;"exports"&nbsp;function</span><br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">063:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" style="color: #777;">//&nbsp;For&nbsp;example&nbsp;some&nbsp;getters&nbsp;and&nbsp;setters</span><br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">064:</span>&nbsp;&nbsp;&nbsp;&nbsp;exports.setFontSize&nbsp;=&nbsp;<span class="keyword" style="font-weight: bold; color: navy;">function</span>(_size)&nbsp;{<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">065:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fontSize&nbsp;=&nbsp;_size;<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">066:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" style="color: #777;">//&nbsp;Returning&nbsp;the&nbsp;current&nbsp;context&nbsp;will&nbsp;let&nbsp;us&nbsp;chain&nbsp;setters</span><br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">067:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="font-weight: bold; color: navy;">return</span>&nbsp;<span class="keyword" style="font-weight: bold; color: navy;">this</span>;<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">068:</span>&nbsp;&nbsp;&nbsp;&nbsp;};<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">069:</span>&nbsp;&nbsp;&nbsp;&nbsp;exports.getFontSize&nbsp;=&nbsp;<span class="keyword" style="font-weight: bold; color: navy;">function</span>()&nbsp;{&nbsp;<span class="keyword" style="font-weight: bold; color: navy;">return</span>&nbsp;fontSize;&nbsp;};<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">070:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" style="color: #777;">//&nbsp;But&nbsp;the&nbsp;typical&nbsp;d3&nbsp;pattern&nbsp;is&nbsp;to&nbsp;have&nbsp;setter&nbsp;that&nbsp;become&nbsp;a&nbsp;getter&nbsp;when&nbsp;no&nbsp;arguments</span><br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">071:</span>&nbsp;&nbsp;&nbsp;&nbsp;exports.fontColor&nbsp;=&nbsp;<span class="keyword" style="font-weight: bold; color: navy;">function</span>(_x)&nbsp;{<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">072:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="font-weight: bold; color: navy;">if</span>&nbsp;(!arguments.length)&nbsp;<span class="keyword" style="font-weight: bold; color: navy;">return</span>&nbsp;fontColor;<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">073:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fontColor&nbsp;=&nbsp;_x;<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">074:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="font-weight: bold; color: navy;">return</span>&nbsp;<span class="keyword" style="font-weight: bold; color: navy;">this</span>;<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">075:</span>&nbsp;&nbsp;&nbsp;&nbsp;};<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">076:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="font-weight: bold; color: navy;">return</span>&nbsp;exports;<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">077:</span>};<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">078:</span><br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">079:</span><span class="keyword" style="font-weight: bold; color: navy;">var</span>&nbsp;table&nbsp;=&nbsp;d3.edge.table();<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">080:</span><span class="comment" style="color: #777;">//&nbsp;Setters&nbsp;can&nbsp;be&nbsp;chained</span><br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">081:</span>table.setFontSize(<span class="string" style="color: #050;">"20"</span>).fontColor(<span class="string" style="color: #050;">"green"</span>);<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">082:</span><span class="comment" style="color: #777;">//&nbsp;Setters&nbsp;are&nbsp;getters&nbsp;when&nbsp;called&nbsp;without&nbsp;argument</span><br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">083:</span>console.log(table.fontColor());<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">084:</span><br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">085:</span>d3.select(<span class="string" style="color: #050;">"#figure"</span>)<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">086:</span>&nbsp;&nbsp;&nbsp;&nbsp;.datum(dataset)<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">087:</span>&nbsp;&nbsp;&nbsp;&nbsp;.call(table);<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">088:</span><br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">089:</span><br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">090:</span><span class="comment" style="color: #777;">//&nbsp;Events</span><br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">091:</span><span class="comment" style="color: #777;">///////////////////////////////////////////////////////////////////////</span><br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">092:</span>d3.edge&nbsp;=&nbsp;{};<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">093:</span><br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">094:</span>d3.edge.table&nbsp;=&nbsp;<span class="function"><span class="keyword" style="font-weight: bold; color: navy;">function</span>&nbsp;<span class="func-title">module</span><span class="params">()</span>&nbsp;{</span><br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">095:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="font-weight: bold; color: navy;">var</span>&nbsp;fontSize&nbsp;=&nbsp;<span class="number" style="color: #800;">10</span>,<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">096:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fontColor&nbsp;=&nbsp;<span class="string" style="color: #050;">"red"</span>;<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">097:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" style="color: #777;">//&nbsp;To&nbsp;get&nbsp;events&nbsp;out&nbsp;of&nbsp;the&nbsp;module</span><br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">098:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" style="color: #777;">//&nbsp;we&nbsp;use&nbsp;d3.dispatch,&nbsp;declaring&nbsp;an&nbsp;"hover"&nbsp;event</span><br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">099:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="font-weight: bold; color: navy;">var</span>&nbsp;dispatch&nbsp;=&nbsp;d3.dispatch(<span class="string" style="color: #050;">"customHover"</span>);<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">100:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="function"><span class="keyword" style="font-weight: bold; color: navy;">function</span>&nbsp;<span class="func-title">exports</span><span class="params">(_selection)</span>&nbsp;{</span><br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">101:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;_selection.each(<span class="keyword" style="font-weight: bold; color: navy;">function</span>(_data)&nbsp;{<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">102:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;d3.select(<span class="keyword" style="font-weight: bold; color: navy;">this</span>)<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">103:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.append(<span class="string" style="color: #050;">"div"</span>)<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">104:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.style({<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">105:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" style="color: #050;">"font-size"</span>:&nbsp;fontSize&nbsp;+&nbsp;<span class="string" style="color: #050;">"px"</span>,<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">106:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;color:&nbsp;fontColor<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">107:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;})<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">108:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.html(<span class="string" style="color: #050;">"Hello&nbsp;World:&nbsp;"</span>&nbsp;+&nbsp;_data)<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">109:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" style="color: #777;">//&nbsp;we&nbsp;trigger&nbsp;the&nbsp;"customHover"&nbsp;event&nbsp;that&nbsp;will&nbsp;receive&nbsp;the&nbsp;usual&nbsp;"d"&nbsp;and&nbsp;"i"&nbsp;arguments</span><br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">110:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" style="color: #777;">//&nbsp;as&nbsp;it&nbsp;is&nbsp;equivalent&nbsp;to:</span><br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">111:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" style="color: #777;">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.on("mouseover",&nbsp;function(d,&nbsp;i)&nbsp;{&nbsp;return&nbsp;dispatch.customHover(d,&nbsp;i);&nbsp;});</span><br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">112:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.on(<span class="string" style="color: #050;">"mouseover"</span>,&nbsp;dispatch.customHover);<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">113:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;});<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">114:</span>&nbsp;&nbsp;&nbsp;&nbsp;}<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">115:</span>&nbsp;&nbsp;&nbsp;&nbsp;exports.fontSize&nbsp;=&nbsp;<span class="keyword" style="font-weight: bold; color: navy;">function</span>(_x)&nbsp;{<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">116:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="font-weight: bold; color: navy;">if</span>&nbsp;(!arguments.length)&nbsp;<span class="keyword" style="font-weight: bold; color: navy;">return</span>&nbsp;fontSize;<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">117:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fontSize&nbsp;=&nbsp;_x;<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">118:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="font-weight: bold; color: navy;">return</span>&nbsp;<span class="keyword" style="font-weight: bold; color: navy;">this</span>;<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">119:</span>&nbsp;&nbsp;&nbsp;&nbsp;};<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">120:</span>&nbsp;&nbsp;&nbsp;&nbsp;exports.fontColor&nbsp;=&nbsp;<span class="keyword" style="font-weight: bold; color: navy;">function</span>(_x)&nbsp;{<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">121:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="font-weight: bold; color: navy;">if</span>&nbsp;(!arguments.length)&nbsp;<span class="keyword" style="font-weight: bold; color: navy;">return</span>&nbsp;fontColor;<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">122:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fontColor&nbsp;=&nbsp;_x;<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">123:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="font-weight: bold; color: navy;">return</span>&nbsp;<span class="keyword" style="font-weight: bold; color: navy;">this</span>;<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">124:</span>&nbsp;&nbsp;&nbsp;&nbsp;};<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">125:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" style="color: #777;">//&nbsp;We&nbsp;can&nbsp;rebind&nbsp;the&nbsp;custom&nbsp;events&nbsp;to&nbsp;the&nbsp;"exports"&nbsp;function</span><br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">126:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" style="color: #777;">//&nbsp;so&nbsp;it's&nbsp;available&nbsp;under&nbsp;the&nbsp;typical&nbsp;"on"&nbsp;method</span><br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">127:</span>&nbsp;&nbsp;&nbsp;&nbsp;d3.rebind(exports,&nbsp;dispatch,&nbsp;<span class="string" style="color: #050;">"on"</span>);<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">128:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" style="font-weight: bold; color: navy;">return</span>&nbsp;exports;<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">129:</span>};<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">130:</span><br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">131:</span><span class="comment" style="color: #777;">//&nbsp;Setters&nbsp;can&nbsp;also&nbsp;be&nbsp;chained&nbsp;directly&nbsp;to&nbsp;the&nbsp;returned&nbsp;function</span><br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">132:</span><span class="keyword" style="font-weight: bold; color: navy;">var</span>&nbsp;table&nbsp;=&nbsp;d3.edge.table().fontSize(<span class="string" style="color: #050;">"20"</span>).fontColor(<span class="string" style="color: #050;">"green"</span>);<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">133:</span><span class="comment" style="color: #777;">//&nbsp;We&nbsp;bind&nbsp;a&nbsp;listener&nbsp;function&nbsp;to&nbsp;the&nbsp;custom&nbsp;event</span><br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">134:</span>table.on(<span class="string" style="color: #050;">"customHover"</span>,&nbsp;<span class="keyword" style="font-weight: bold; color: navy;">function</span>(d,&nbsp;i)&nbsp;{&nbsp;console.log(<span class="string" style="color: #050;">"customHover:&nbsp;"</span>&nbsp;+&nbsp;d,&nbsp;i);&nbsp;});<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">135:</span><br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">136:</span>d3.select(<span class="string" style="color: #050;">"#figure"</span>)<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">137:</span>&nbsp;&nbsp;&nbsp;&nbsp;.datum(dataset)<br /><span class="linenumbering" style="color: #ccc; padding-right: 0.5em;">138:</span>&nbsp;&nbsp;&nbsp;&nbsp;.call(table);</code></pre>